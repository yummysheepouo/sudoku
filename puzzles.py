import os
import random

PUZZLE_CONTENTS = {
    "puzzle1.txt":[ "534678912","672195348","198342567","859761423","426853791","713924856","961537284","287419635","345286179"],
    "puzzle1S.txt":[ "534678912","672195348","198342567","859761423","426853791","713924856","961537284","287419635","345286179"],
    "puzzle2.txt":[ "435269781","682571493","197834562","826195347","374682915","951743628","519326874","248957136","763418259"],
    "puzzle2S.txt":[ "435269781","682571493","197834562","826195347","374682915","951743628","519326874","248957136","763418259"],
    "puzzle3.txt":[ "245981376","169273584","837564219","976125438","513498627","482736195","391657842","728349651","654812793"],
    "puzzle3S.txt":[ "245981376","169273584","837564219","976125438","513498627","482736195","391657842","728349651","654812793"],
    "puzzle4.txt":[ "123456789","456789123","789123456","234567891","567891234","891234567","345678912","678912345","912345678"],
    "puzzle4S.txt":[ "123456789","456789123","789123456","234567891","567891234","891234567","345678912","678912345","912345678"],
    "puzzle5.txt":[ "534678912","672195348","198342567","859761423","426853791","713924856","961537284","287419635","345286179"],
    "puzzle5S.txt":[ "534678912","672195348","198342567","859761423","426853791","713924856","961537284","287419635","345286179"],
    "puzzle6.txt":[ "795836421","431297856","286145397","814753962","659421738","372968145","928514673","163782594","547693281"],
    "puzzle6S.txt":[ "795836421","431297856","286145397","814753962","659421738","372968145","928514673","163782594","547693281"]
}

PUZZLE_DIR = os.path.join(os.path.dirname(__file__), "puzzle")

def initialize_puzzle_files():
    if not os.path.exists(PUZZLE_DIR):
        os.makedirs(PUZZLE_DIR)
    for filename, content in PUZZLE_CONTENTS.items():
        file_path = os.path.join(PUZZLE_DIR, filename)
        if not os.path.exists(file_path):
            with open(file_path, 'w') as f:
                for line in content:
                    f.write(line + "\n")

def randomize_puzzle(puzzle, difficulty, difficulty_levels):
    puzzle_copy = [row[:] for row in puzzle]
    cells_to_hide = 81 - difficulty_levels.get(difficulty, 40)
    all_positions = [(r, c) for r in range(9) for c in range(9)]
    random.shuffle(all_positions)
    for i in range(min(cells_to_hide, 81)):
        r, c = all_positions[i]
        puzzle_copy[r][c] = '.'
    return puzzle_copy